@baseUrl = http://localhost:5000/v1/api/preview
@authToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsInVzZXJuYW1lIjoia2hhbGlsIiwiaWF0IjoxNzQ2MDk5OTA5LCJleHAiOjE3NDg2OTE5MDl9.FryYa6qiAmKumY5cZ3Z1ONKW7vjz1XloP0AgVcgZOkg
### Prerequisite: Clone Repository - Success
POST {{baseUrl}}/clone/mytestrepo.git
Content-Type: application/json
Authorization: Bearer {{authToken}}

### 1. Create Folder - Success
POST {{baseUrl}}/item
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "relativePath": "mytestrepo.git/new-test-folder",
    "type": "folder"
}

### 2. Create File - Success
POST {{baseUrl}}/item
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "relativePath": "mytestrepo.git/new-test-folder/new-test-file.txt",
    "type": "file",
    "content": "Initial content for the new file created via HTTP test."
}

### 3. Modify File Content - Success (New File)
PUT {{baseUrl}}/content
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "relativePath": "mytestrepo.git/new-test-folder/new-test-file.txt",
    "newContent": "This content has been modified by the HTTP test."
}

### 4. Rename File - Success
PATCH {{baseUrl}}/item
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "oldRelativePath": "mytestrepo.git/new-test-folder/new-test-file.txt",
    "newRelativePath": "mytestrepo.git/new-test-folder/renamed-test-file.txt"
}

### 5. Rename Folder - Success
PATCH {{baseUrl}}/item
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "oldRelativePath": "mytestrepo.git/new-test-folder",
    "newRelativePath": "mytestrepo.git/renamed-test-folder"
}

### 6. Remove File - Success
DELETE {{baseUrl}}/item?relativePath=mytestrepo.git/renamed-test-folder/renamed-test-file.txt
Authorization: Bearer {{authToken}}

### 7. Remove Folder - Success
DELETE {{baseUrl}}/item?relativePath=mytestrepo.git/renamed-test-folder
Authorization: Bearer {{authToken}}

### Get Content - Existing File Success
GET {{baseUrl}}/content?relativePath=mytestrepo.git/new-test-folder/new-test-file.txt
Authorization: Bearer {{authToken}}

### Get Content - Existing Directory Success
GET {{baseUrl}}/content?relativePath=mytestrepo.git/new-test-folder
Authorization: Bearer {{authToken}}

### Clone Repository - Repo Not Found
POST {{baseUrl}}/clone/non-existent-repo.git
Content-Type: application/json
Authorization: Bearer {{authToken}}

### Get Content - Path Not Found
GET {{baseUrl}}/content?relativePath=mytestrepo.git/non-existent-file.txt
Authorization: Bearer {{authToken}}

### Get Content - Missing Path Parameter
GET {{baseUrl}}/content
Authorization: Bearer {{authToken}}

### Create Item - Already Exists (Folder)
POST {{baseUrl}}/item
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "relativePath": "mytestrepo.git/new-test-folder",
    "type": "folder"
}

### Create Item - Missing Type
POST {{baseUrl}}/item
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "relativePath": "mytestrepo.git/some-path",
    "content": "some content"
}

### Modify File Content - File Not Found
PUT {{baseUrl}}/content
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "relativePath": "mytestrepo.git/non-existent-file.txt",
    "newContent": "This won't be written"
}

### Modify File Content - Missing Parameters
PUT {{baseUrl}}/content
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "relativePath": "mytestrepo.git/renamed-test-folder/renamed-test-file.txt"
}

### Modify File Content - Path is Directory
# Attempts to modify 'mytestrepo.git/renamed-test-folder' as if it were a file.
PUT {{baseUrl}}/content
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "relativePath": "mytestrepo.git/renamed-test-folder",
    "newContent": "This should fail as it's a directory"
}

### Rename Item - Target Exists
# Attempts to rename 'mytestrepo.git/renamed-test-folder' to itself.
PATCH {{baseUrl}}/item
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "oldRelativePath": "mytestrepo.git/renamed-test-folder",
    "newRelativePath": "mytestrepo.git/renamed-test-folder"
}

### Rename Item - Source Not Found
# Attempts to rename 'mytestrepo.git/non-existent-source'.
PATCH {{baseUrl}}/item
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "oldRelativePath": "mytestrepo.git/non-existent-source",
    "newRelativePath": "mytestrepo.git/some-new-name"
}

### Remove Item - Not Found
# Attempts to remove 'mytestrepo.git/non-existent-path'.
DELETE {{baseUrl}}/item?relativePath=mytestrepo.git/non-existent-path
Authorization: Bearer {{authToken}}

### Remove Item - Missing Path
# Attempts to remove an item without specifying the path.
DELETE {{baseUrl}}/item
Authorization: Bearer {{authToken}}
